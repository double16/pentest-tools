FROM ghcr.io/zaproxy/zaproxy:weekly

RUN ./zap.sh -cmd -addonupdate ; \
    ./zap.sh \
    -addoninstall accessControl \
    -addoninstall ascanrules \
    -addoninstall ascanrulesBeta \
    -addoninstall bruteforce \
    -addoninstall client \
    -addoninstall directorylistv2_3 \
    -addoninstall evalvillain \
    -addoninstall fileupload \
    -addoninstall fuzzdb \
    -addoninstall fuzzdboffensive \
    -addoninstall graphql \
    -addoninstall imagelocationscanner \
    -addoninstall jython \
    -addoninstall jwt \
    -addoninstall openapi \
    -addoninstall packpentester \
    -addoninstall paramdigger \
    -addoninstall pscanrules \
    -addoninstall pscanrulesBeta \
    -addoninstall reflect \
    -addoninstall saml \
    -addoninstall soap \
    -addoninstall sqliplugin \
    -addoninstall svndigger \
    -addoninstall tokengen \
    -addoninstall viewstate \
    -addoninstall wappalyzer \
    -addoninstall webdriverlinux \
    -addoninstall zest \
    -cmd

USER root

ADD entrypoint.sh /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
