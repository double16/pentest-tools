FROM ghcr.io/zaproxy/zaproxy:weekly

RUN ./zap.sh -addonupdate \
    -addoninstall accessControl \
    -addoninstall ascanrules \
    -addoninstall ascanrulesBeta \
    -addoninstall evalvillain \
    -addoninstall fileupload \
    -addoninstall graphql \
    -addoninstall imagelocationscanner \
    -addoninstall jython \
    -addoninstall jwt \
    -addoninstall openapi \
    -addoninstall packpentester \
    -addoninstall paramdigger \
    -addoninstall pscanrulesBeta \
    -addoninstall reflect \
    -addoninstall saml \
    -addoninstall soap \
    -addoninstall sqliplugin \
    -addoninstall viewstate \
    -addoninstall wappalyzer \
    -cmd

ADD entrypoint.sh /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
